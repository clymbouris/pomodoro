function Pomodoro(t){var i=this;i.duration=t?ko.observable(t):ko.observable(1500),i.remaining=i.duration(),i.timer=ko.observable(i.remaining),i.elapsed=0,i.isPaused=ko.observable(!0),i.pauseView=ko.computed(function(){return i.isPaused()?"paused":""}),i.minutes=ko.computed(function(){return parseInt(i.timer()/60,10)}),i.seconds=ko.computed(function(){var t=parseInt(i.timer()%60,10);return 10>t?"0"+t:t}),i.bell=new Audio("audio/bell.mp3"),i.tick=new Audio("audio/tick.mp3"),i.tock=new Audio("audio/tock.wav"),i.crank=new Audio("audio/crank.mp3"),i.tickStart=new Audio("audio/start.mp3")}Pomodoro.prototype.clock=function(){var t=(new Date).getTime()-this.start;this.elapsed=Math.floor(t/100/10),Math.round(this.elapsed)===this.elapsed&&this.elapsed++,this.timer(this.remaining-this.elapsed),this.timer()<0&&(this.resetTimer(),this.ringTimer()),document.title=this.minutes()+":"+this.seconds()},Pomodoro.prototype.startTimer=function(){this.tick.play();var t=this;this.start=(new Date).getTime(),this.interval=setInterval(function(){t.clock()},100)},Pomodoro.prototype.resetTimer=function(){clearInterval(this.interval),this.crank.play(),this.isPaused(!0),this.setTimer(this.duration())},Pomodoro.prototype.ringTimer=function(){console.log("Ring, ring!"),this.bell.play()},Pomodoro.prototype.setTimer=function(t){this.remaining=t,this.timer(this.remaining)},Pomodoro.prototype.pausePlay=function(){this.tick.play(),clearInterval(this.interval),this.isPaused(!this.isPaused()),this.isPaused()?this.remaining=this.timer():this.startTimer()},Pomodoro.prototype.adjustDuration=function(t){this.isPaused()||this.pausePlay(),this.tock.play(),t>0&&this.duration()+t>=3600?this.duration(3600):0>t&&this.duration()+t<1?this.duration(this.timer()):this.duration(this.timer()-this.timer()%60+t),this.setTimer(this.duration())},$(document).ready(function(){var t=new Pomodoro(1500);ko.applyBindings(t),$tomato=$("#tomato"),$tomato.click(function(){t.pausePlay()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbW9kb3JvLmpzIiwidG9tYXRvLmpzIl0sIm5hbWVzIjpbIlBvbW9kb3JvIiwiZHVyYXRpb24iLCJzZWxmIiwidGhpcyIsImtvIiwib2JzZXJ2YWJsZSIsInJlbWFpbmluZyIsInRpbWVyIiwiZWxhcHNlZCIsImlzUGF1c2VkIiwicGF1c2VWaWV3IiwiY29tcHV0ZWQiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJzZWNvbmRzIiwicyIsImJlbGwiLCJBdWRpbyIsInRpY2siLCJ0b2NrIiwiY3JhbmsiLCJ0aWNrU3RhcnQiLCJwcm90b3R5cGUiLCJjbG9jayIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInN0YXJ0IiwiTWF0aCIsImZsb29yIiwicm91bmQiLCJyZXNldFRpbWVyIiwicmluZ1RpbWVyIiwiZG9jdW1lbnQiLCJ0aXRsZSIsInN0YXJ0VGltZXIiLCJwbGF5IiwibWUiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNldFRpbWVyIiwiY29uc29sZSIsImxvZyIsInBhdXNlUGxheSIsImFkanVzdER1cmF0aW9uIiwiJCIsInJlYWR5IiwicCIsImFwcGx5QmluZGluZ3MiLCIkdG9tYXRvIiwiY2xpY2siXSwibWFwcGluZ3MiOiJBQUNBLFFBQUFBLFVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsSUFFQUQsR0FBQUQsU0FBQSxFQUFBRyxHQUFBQyxXQUFBSixHQUFBRyxHQUFBQyxXQUFBLE1BRUFILEVBQUFJLFVBQUFKLEVBQUFELFdBRUFDLEVBQUFLLE1BQUFILEdBQUFDLFdBQUFILEVBQUFJLFdBRUFKLEVBQUFNLFFBQUEsRUFHQU4sRUFBQU8sU0FBQUwsR0FBQUMsWUFBQSxHQUNBSCxFQUFBUSxVQUFBTixHQUFBTyxTQUFBLFdBQ0EsTUFBQVQsR0FBQU8sV0FBQSxTQUFBLEtBSUFQLEVBQUFVLFFBQUFSLEdBQUFPLFNBQUEsV0FDQSxNQUFBRSxVQUFBWCxFQUFBSyxRQUFBLEdBQUEsTUFHQUwsRUFBQVksUUFBQVYsR0FBQU8sU0FBQSxXQUNBLEdBQUFJLEdBQUFGLFNBQUFYLEVBQUFLLFFBQUEsR0FBQSxHQUNBLE9BQUEsSUFBQVEsRUFBQSxJQUFBQSxFQUFBQSxJQUlBYixFQUFBYyxLQUFBLEdBQUFDLE9BQUEsa0JBQ0FmLEVBQUFnQixLQUFBLEdBQUFELE9BQUEsa0JBQ0FmLEVBQUFpQixLQUFBLEdBQUFGLE9BQUEsa0JBQ0FmLEVBQUFrQixNQUFBLEdBQUFILE9BQUEsbUJBQ0FmLEVBQUFtQixVQUFBLEdBQUFKLE9BQUEsbUJBR0FqQixTQUFBc0IsVUFBQUMsTUFBQSxXQUNBLEdBQUFDLElBQUEsR0FBQUMsT0FBQUMsVUFBQXZCLEtBQUF3QixLQUNBeEIsTUFBQUssUUFBQW9CLEtBQUFDLE1BQUFMLEVBQUEsSUFBQSxJQUNBSSxLQUFBRSxNQUFBM0IsS0FBQUssV0FBQUwsS0FBQUssU0FDQUwsS0FBQUssVUFFQUwsS0FBQUksTUFBQUosS0FBQUcsVUFBQUgsS0FBQUssU0FDQUwsS0FBQUksUUFBQSxJQUNBSixLQUFBNEIsYUFDQTVCLEtBQUE2QixhQUVBQyxTQUFBQyxNQUFBL0IsS0FBQVMsVUFBQSxJQUFBVCxLQUFBVyxXQUdBZCxTQUFBc0IsVUFBQWEsV0FBQSxXQUVBaEMsS0FBQWUsS0FBQWtCLE1BQ0EsSUFBQUMsR0FBQWxDLElBQ0FBLE1BQUF3QixPQUFBLEdBQUFGLE9BQUFDLFVBQ0F2QixLQUFBbUMsU0FBQUMsWUFBQSxXQUNBRixFQUFBZCxTQUNBLE1BR0F2QixTQUFBc0IsVUFBQVMsV0FBQSxXQUNBUyxjQUFBckMsS0FBQW1DLFVBQ0FuQyxLQUFBaUIsTUFBQWdCLE9BQ0FqQyxLQUFBTSxVQUFBLEdBQ0FOLEtBQUFzQyxTQUFBdEMsS0FBQUYsYUFHQUQsU0FBQXNCLFVBQUFVLFVBQUEsV0FDQVUsUUFBQUMsSUFBQSxlQUNBeEMsS0FBQWEsS0FBQW9CLFFBR0FwQyxTQUFBc0IsVUFBQW1CLFNBQUEsU0FBQXhDLEdBQ0FFLEtBQUFHLFVBQUFMLEVBQ0FFLEtBQUFJLE1BQUFKLEtBQUFHLFlBR0FOLFNBQUFzQixVQUFBc0IsVUFBQSxXQUNBekMsS0FBQWUsS0FBQWtCLE9BQ0FJLGNBQUFyQyxLQUFBbUMsVUFDQW5DLEtBQUFNLFVBQUFOLEtBQUFNLFlBQ0FOLEtBQUFNLFdBQ0FOLEtBQUFHLFVBQUFILEtBQUFJLFFBREFKLEtBQUFnQyxjQUlBbkMsU0FBQXNCLFVBQUF1QixlQUFBLFNBQUEvQixHQUNBWCxLQUFBTSxZQUFBTixLQUFBeUMsWUFDQXpDLEtBQUFnQixLQUFBaUIsT0FDQXRCLEVBQUEsR0FBQVgsS0FBQUYsV0FBQWEsR0FBQSxLQUNBWCxLQUFBRixTQUFBLE1BRUEsRUFBQWEsR0FBQVgsS0FBQUYsV0FBQWEsRUFBQSxFQUNBWCxLQUFBRixTQUFBRSxLQUFBSSxTQUdBSixLQUFBRixTQUFBRSxLQUFBSSxRQUFBSixLQUFBSSxRQUFBLEdBQUFPLEdBRUFYLEtBQUFzQyxTQUFBdEMsS0FBQUYsYUNqR0E2QyxFQUFBYixVQUFBYyxNQUFBLFdBRUEsR0FBQUMsR0FBQSxHQUFBaEQsVUFBQSxLQUNBSSxJQUFBNkMsY0FBQUQsR0FFQUUsUUFBQUosRUFBQSxXQUNBSSxRQUFBQyxNQUFBLFdBQ0FILEVBQUFKIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIC8vIGR1cmF0aW9uOiBzZWNvbmRzXG5mdW5jdGlvbiBQb21vZG9ybyhkdXJhdGlvbikge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdC8vIFRpbWUgZHVyYXRpb24gYXMgc2V0IGJ5IFVzZXIuIFdlIHN0b3JlIHRoaXMgdG8gaGF2ZSBpdCBhdmFpbGFibGUgb24gcmVzZXQuIERlZmF1bHQgMjUgbWlucy5cblx0c2VsZi5kdXJhdGlvbiA9IChkdXJhdGlvbikgPyBrby5vYnNlcnZhYmxlKGR1cmF0aW9uKSA6IGtvLm9ic2VydmFibGUoMjUgKiA2MCk7XG5cdC8vIFRpbWUgcmVtYWluaW5nIGluIHNlY29uZHNcblx0c2VsZi5yZW1haW5pbmcgPSBzZWxmLmR1cmF0aW9uKCk7XG5cdC8vIFJ1bm5pbmcgVGltZXJcblx0c2VsZi50aW1lciA9IGtvLm9ic2VydmFibGUoc2VsZi5yZW1haW5pbmcpO1xuXHQvLyBUbyBrZWVwIGNsb2NrIGZ1bmN0aW9uIGFjY3VyYXRlXG5cdHNlbGYuZWxhcHNlZCA9IDA7XG5cblx0Ly8gUGF1c2Ugc3RhdHVzIGFuZCB2aWV3XG5cdHNlbGYuaXNQYXVzZWQgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuXHRzZWxmLnBhdXNlVmlldyA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAoc2VsZi5pc1BhdXNlZCgpKSA/ICdwYXVzZWQnIDogJyc7XG5cdH0pO1xuXG5cdC8vIE1pbnV0ZXMgVmlld1xuXHRzZWxmLm1pbnV0ZXMgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gcGFyc2VJbnQoc2VsZi50aW1lcigpIC8gNjAsIDEwKTtcblx0fSk7XG5cdC8vIFNlY29uZHMgVmlld1xuXHRzZWxmLnNlY29uZHMgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcblx0XHR2YXIgcyA9IHBhcnNlSW50KHNlbGYudGltZXIoKSAlIDYwLCAxMCk7XG5cdFx0cmV0dXJuIChzIDwgMTApID8gJzAnICsgcyA6IHM7XG5cdH0pO1xuXHRcblx0Ly8gU291bmRGWFxuXHRzZWxmLmJlbGwgPSBuZXcgQXVkaW8oJ2F1ZGlvL2JlbGwubXAzJyk7XG5cdHNlbGYudGljayA9IG5ldyBBdWRpbygnYXVkaW8vdGljay5tcDMnKTtcblx0c2VsZi50b2NrID0gbmV3IEF1ZGlvKCdhdWRpby90b2NrLndhdicpO1xuXHRzZWxmLmNyYW5rID0gbmV3IEF1ZGlvKCdhdWRpby9jcmFuay5tcDMnKTtcblx0c2VsZi50aWNrU3RhcnQgPSBuZXcgQXVkaW8oJ2F1ZGlvL3N0YXJ0Lm1wMycpO1xufVxuXG5Qb21vZG9yby5wcm90b3R5cGUuY2xvY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuc3RhcnQ7XG5cdHRoaXMuZWxhcHNlZCA9IE1hdGguZmxvb3IodGltZSAvIDEwMCAvIDEwKTtcblx0aWYoTWF0aC5yb3VuZCh0aGlzLmVsYXBzZWQpID09PSB0aGlzLmVsYXBzZWQpIHtcblx0XHR0aGlzLmVsYXBzZWQrKztcblx0fVxuXHR0aGlzLnRpbWVyKHRoaXMucmVtYWluaW5nIC0gdGhpcy5lbGFwc2VkKTtcblx0aWYodGhpcy50aW1lcigpIDwgMCkge1xuXHRcdHRoaXMucmVzZXRUaW1lcigpO1xuXHRcdHRoaXMucmluZ1RpbWVyKCk7XG5cdH1cblx0ZG9jdW1lbnQudGl0bGUgPSB0aGlzLm1pbnV0ZXMoKSArICc6JyArIHRoaXMuc2Vjb25kcygpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbigpIHtcblx0Ly8gaWYgdGhpcyBpcyBub3Qgc2V0IHRoZW4gY2FsbGluZyB0aGUgc2V0SW50ZXJ2YWwgZnVuY3Rpb24gd2l0aCB0aGlzLmNsb2NrIHdpbGwgc2V0ICd0aGlzJyB0byBnbG9iYWxcblx0dGhpcy50aWNrLnBsYXkoKTtcblx0dmFyIG1lID0gdGhpcztcblx0dGhpcy5zdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0bWUuY2xvY2soKTtcblx0fSwgMTAwKTtcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5yZXNldFRpbWVyID0gZnVuY3Rpb24oKSB7XG5cdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG5cdHRoaXMuY3JhbmsucGxheSgpO1xuXHR0aGlzLmlzUGF1c2VkKHRydWUpO1xuXHR0aGlzLnNldFRpbWVyKHRoaXMuZHVyYXRpb24oKSk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucmluZ1RpbWVyID0gZnVuY3Rpb24oKSB7XG5cdGNvbnNvbGUubG9nKCdSaW5nLCByaW5nIScpO1xuXHR0aGlzLmJlbGwucGxheSgpOyBcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5zZXRUaW1lciA9IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XG5cdHRoaXMucmVtYWluaW5nID0gZHVyYXRpb247XG5cdHRoaXMudGltZXIodGhpcy5yZW1haW5pbmcpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnBhdXNlUGxheSA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLnRpY2sucGxheSgpO1xuXHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuXHR0aGlzLmlzUGF1c2VkKCF0aGlzLmlzUGF1c2VkKCkpO1xuXHRpZiAoIXRoaXMuaXNQYXVzZWQoKSkgdGhpcy5zdGFydFRpbWVyKCk7XG5cdGVsc2UgdGhpcy5yZW1haW5pbmcgPSB0aGlzLnRpbWVyKCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUuYWRqdXN0RHVyYXRpb24gPSBmdW5jdGlvbihzZWNvbmRzKSB7XG5cdGlmICghdGhpcy5pc1BhdXNlZCgpKSB0aGlzLnBhdXNlUGxheSgpO1xuXHR0aGlzLnRvY2sucGxheSgpO1xuXHRpZiAoc2Vjb25kcyA+IDAgJiYgdGhpcy5kdXJhdGlvbigpICsgc2Vjb25kcyA+PSAzNjAwKSB7XG5cdFx0dGhpcy5kdXJhdGlvbigzNjAwKTtcblx0fVxuXHRlbHNlIGlmIChzZWNvbmRzIDwgMCAmJiB0aGlzLmR1cmF0aW9uKCkgKyBzZWNvbmRzIDwgMSkge1xuXHRcdHRoaXMuZHVyYXRpb24odGhpcy50aW1lcigpKTtcblx0fVxuXHRlbHNlIHtcblx0XHR0aGlzLmR1cmF0aW9uKHRoaXMudGltZXIoKSAtICh0aGlzLnRpbWVyKCkgJSA2MCkgKyBzZWNvbmRzKTtcblx0fVxuXHR0aGlzLnNldFRpbWVyKHRoaXMuZHVyYXRpb24oKSk7XG59O1xuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcblx0Ly8gSW5pdGlhbGl6ZSBQb21vZG9ybyBjbG9jayBWaWV3TW9kZWwgY29uc3RydWN0b3IgYW5kIGFwcGx5IGtub2Nrb3V0IGJpbmRpbmdzXG5cdHZhciBwID0gbmV3IFBvbW9kb3JvKDE1MDApO1xuXHRrby5hcHBseUJpbmRpbmdzKHApO1xuXHQvLyBBcHBseSBwYXVzZS9wbGF5IGNsaWNrIG9uIHRvbWF0byBlbGVtZW50XG5cdCR0b21hdG8gPSAkKCcjdG9tYXRvJyk7XG5cdCR0b21hdG8uY2xpY2soZnVuY3Rpb24oKSB7XG5cdFx0cC5wYXVzZVBsYXkoKTtcblx0fSk7XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
