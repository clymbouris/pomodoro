function Pomodoro(t){var i=this;i.duration=t?ko.observable(t):ko.observable(1500),i.remaining=i.duration(),i.timer=ko.observable(i.remaining),i.elapsed=0,i.isPaused=ko.observable(!0),i.pauseView=ko.computed(function(){return i.isPaused()?"paused":""}),i.minutes=ko.computed(function(){return parseInt(i.timer()/60,10)}),i.seconds=ko.computed(function(){var t=parseInt(i.timer()%60,10);return 10>t?"0"+t:t}),i.bell=new Audio("audio/bell.mp3"),i.tick=new Audio("audio/tick.mp3"),i.tock=new Audio("audio/tock.wav"),i.crank=new Audio("audio/crank.mp3"),i.tickStart=new Audio("audio/start.mp3")}Pomodoro.prototype.clock=function(){var t=(new Date).getTime()-this.start;this.elapsed=Math.floor(t/100/10),Math.round(this.elapsed)===this.elapsed&&this.elapsed++,this.timer(this.remaining-this.elapsed),this.timer()<0&&(this.resetTimer(),this.ringTimer()),this.updateTitle()},Pomodoro.prototype.startTimer=function(){this.tick.play(),this.start=(new Date).getTime();var t=this;this.interval=setInterval(function(){t.clock()},100)},Pomodoro.prototype.updateTitle=function(){document.title=this.isPaused()?"pomodoro":this.minutes()+":"+this.seconds()},Pomodoro.prototype.resetTimer=function(){clearInterval(this.interval),this.crank.play(),this.isPaused(!0),this.setTimer(this.duration()),this.updateTitle()},Pomodoro.prototype.ringTimer=function(){console.log("Ring, ring!"),this.bell.play()},Pomodoro.prototype.setTimer=function(t){this.remaining=t,this.timer(this.remaining)},Pomodoro.prototype.pausePlay=function(){this.tick.play(),clearInterval(this.interval),this.isPaused(!this.isPaused()),this.updateTitle(),this.isPaused()?this.remaining=this.timer():this.startTimer()},Pomodoro.prototype.adjustDuration=function(t){this.isPaused()||this.pausePlay(),this.tock.play(),t>0&&this.duration()+t>=3600?this.duration(3600):0>t&&this.duration()+t<1?this.duration(this.timer()):this.duration(this.timer()-this.timer()%60+t),this.setTimer(this.duration())},$(document).ready(function(){var t=new Pomodoro(1500);ko.applyBindings(t),$tomato=$("#tomato"),$tomato.click(function(){t.pausePlay()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbW9kb3JvLmpzIiwidG9tYXRvLmpzIl0sIm5hbWVzIjpbIlBvbW9kb3JvIiwiZHVyYXRpb24iLCJzZWxmIiwidGhpcyIsImtvIiwib2JzZXJ2YWJsZSIsInJlbWFpbmluZyIsInRpbWVyIiwiZWxhcHNlZCIsImlzUGF1c2VkIiwicGF1c2VWaWV3IiwiY29tcHV0ZWQiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJzZWNvbmRzIiwicyIsImJlbGwiLCJBdWRpbyIsInRpY2siLCJ0b2NrIiwiY3JhbmsiLCJ0aWNrU3RhcnQiLCJwcm90b3R5cGUiLCJjbG9jayIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInN0YXJ0IiwiTWF0aCIsImZsb29yIiwicm91bmQiLCJyZXNldFRpbWVyIiwicmluZ1RpbWVyIiwidXBkYXRlVGl0bGUiLCJzdGFydFRpbWVyIiwicGxheSIsIm1lIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImRvY3VtZW50IiwidGl0bGUiLCJjbGVhckludGVydmFsIiwic2V0VGltZXIiLCJjb25zb2xlIiwibG9nIiwicGF1c2VQbGF5IiwiYWRqdXN0RHVyYXRpb24iLCIkIiwicmVhZHkiLCJwIiwiYXBwbHlCaW5kaW5ncyIsIiR0b21hdG8iLCJjbGljayJdLCJtYXBwaW5ncyI6IkFBQ0EsUUFBQUEsVUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRCxTQUFBLEVBQUFHLEdBQUFDLFdBQUFKLEdBQUFHLEdBQUFDLFdBQUEsTUFFQUgsRUFBQUksVUFBQUosRUFBQUQsV0FFQUMsRUFBQUssTUFBQUgsR0FBQUMsV0FBQUgsRUFBQUksV0FFQUosRUFBQU0sUUFBQSxFQUdBTixFQUFBTyxTQUFBTCxHQUFBQyxZQUFBLEdBQ0FILEVBQUFRLFVBQUFOLEdBQUFPLFNBQUEsV0FDQSxNQUFBVCxHQUFBTyxXQUFBLFNBQUEsS0FJQVAsRUFBQVUsUUFBQVIsR0FBQU8sU0FBQSxXQUNBLE1BQUFFLFVBQUFYLEVBQUFLLFFBQUEsR0FBQSxNQUdBTCxFQUFBWSxRQUFBVixHQUFBTyxTQUFBLFdBQ0EsR0FBQUksR0FBQUYsU0FBQVgsRUFBQUssUUFBQSxHQUFBLEdBQ0EsT0FBQSxJQUFBUSxFQUFBLElBQUFBLEVBQUFBLElBSUFiLEVBQUFjLEtBQUEsR0FBQUMsT0FBQSxrQkFDQWYsRUFBQWdCLEtBQUEsR0FBQUQsT0FBQSxrQkFDQWYsRUFBQWlCLEtBQUEsR0FBQUYsT0FBQSxrQkFDQWYsRUFBQWtCLE1BQUEsR0FBQUgsT0FBQSxtQkFDQWYsRUFBQW1CLFVBQUEsR0FBQUosT0FBQSxtQkFHQWpCLFNBQUFzQixVQUFBQyxNQUFBLFdBQ0EsR0FBQUMsSUFBQSxHQUFBQyxPQUFBQyxVQUFBdkIsS0FBQXdCLEtBQ0F4QixNQUFBSyxRQUFBb0IsS0FBQUMsTUFBQUwsRUFBQSxJQUFBLElBQ0FJLEtBQUFFLE1BQUEzQixLQUFBSyxXQUFBTCxLQUFBSyxTQUNBTCxLQUFBSyxVQUVBTCxLQUFBSSxNQUFBSixLQUFBRyxVQUFBSCxLQUFBSyxTQUNBTCxLQUFBSSxRQUFBLElBQ0FKLEtBQUE0QixhQUNBNUIsS0FBQTZCLGFBRUE3QixLQUFBOEIsZUFHQWpDLFNBQUFzQixVQUFBWSxXQUFBLFdBRUEvQixLQUFBZSxLQUFBaUIsT0FFQWhDLEtBQUF3QixPQUFBLEdBQUFGLE9BQUFDLFNBRUEsSUFBQVUsR0FBQWpDLElBQ0FBLE1BQUFrQyxTQUFBQyxZQUFBLFdBQ0FGLEVBQUFiLFNBQ0EsTUFJQXZCLFNBQUFzQixVQUFBVyxZQUFBLFdBQ0FNLFNBQUFDLE1BQUFyQyxLQUFBTSxXQUFBLFdBQUFOLEtBQUFTLFVBQUEsSUFBQVQsS0FBQVcsV0FHQWQsU0FBQXNCLFVBQUFTLFdBQUEsV0FFQVUsY0FBQXRDLEtBQUFrQyxVQUNBbEMsS0FBQWlCLE1BQUFlLE9BQ0FoQyxLQUFBTSxVQUFBLEdBQ0FOLEtBQUF1QyxTQUFBdkMsS0FBQUYsWUFDQUUsS0FBQThCLGVBR0FqQyxTQUFBc0IsVUFBQVUsVUFBQSxXQUNBVyxRQUFBQyxJQUFBLGVBQ0F6QyxLQUFBYSxLQUFBbUIsUUFHQW5DLFNBQUFzQixVQUFBb0IsU0FBQSxTQUFBekMsR0FDQUUsS0FBQUcsVUFBQUwsRUFDQUUsS0FBQUksTUFBQUosS0FBQUcsWUFHQU4sU0FBQXNCLFVBQUF1QixVQUFBLFdBQ0ExQyxLQUFBZSxLQUFBaUIsT0FDQU0sY0FBQXRDLEtBQUFrQyxVQUNBbEMsS0FBQU0sVUFBQU4sS0FBQU0sWUFDQU4sS0FBQThCLGNBQ0E5QixLQUFBTSxXQUNBTixLQUFBRyxVQUFBSCxLQUFBSSxRQURBSixLQUFBK0IsY0FJQWxDLFNBQUFzQixVQUFBd0IsZUFBQSxTQUFBaEMsR0FDQVgsS0FBQU0sWUFBQU4sS0FBQTBDLFlBQ0ExQyxLQUFBZ0IsS0FBQWdCLE9BQ0FyQixFQUFBLEdBQUFYLEtBQUFGLFdBQUFhLEdBQUEsS0FDQVgsS0FBQUYsU0FBQSxNQUVBLEVBQUFhLEdBQUFYLEtBQUFGLFdBQUFhLEVBQUEsRUFDQVgsS0FBQUYsU0FBQUUsS0FBQUksU0FHQUosS0FBQUYsU0FBQUUsS0FBQUksUUFBQUosS0FBQUksUUFBQSxHQUFBTyxHQUVBWCxLQUFBdUMsU0FBQXZDLEtBQUFGLGFDM0dBOEMsRUFBQVIsVUFBQVMsTUFBQSxXQUVBLEdBQUFDLEdBQUEsR0FBQWpELFVBQUEsS0FDQUksSUFBQThDLGNBQUFELEdBRUFFLFFBQUFKLEVBQUEsV0FDQUksUUFBQUMsTUFBQSxXQUNBSCxFQUFBSiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAvLyBkdXJhdGlvbjogc2Vjb25kc1xuZnVuY3Rpb24gUG9tb2Rvcm8oZHVyYXRpb24pIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyBUaW1lIGR1cmF0aW9uIGFzIHNldCBieSBVc2VyLiBXZSBzdG9yZSB0aGlzIHRvIGhhdmUgaXQgYXZhaWxhYmxlIG9uIHJlc2V0LiBEZWZhdWx0IDI1IG1pbnMuXG5cdHNlbGYuZHVyYXRpb24gPSAoZHVyYXRpb24pID8ga28ub2JzZXJ2YWJsZShkdXJhdGlvbikgOiBrby5vYnNlcnZhYmxlKDI1ICogNjApO1xuXHQvLyBUaW1lIHJlbWFpbmluZyBpbiBzZWNvbmRzXG5cdHNlbGYucmVtYWluaW5nID0gc2VsZi5kdXJhdGlvbigpO1xuXHQvLyBSdW5uaW5nIFRpbWVyXG5cdHNlbGYudGltZXIgPSBrby5vYnNlcnZhYmxlKHNlbGYucmVtYWluaW5nKTtcblx0Ly8gVG8ga2VlcCBjbG9jayBmdW5jdGlvbiBhY2N1cmF0ZVxuXHRzZWxmLmVsYXBzZWQgPSAwO1xuXG5cdC8vIFBhdXNlIHN0YXR1cyBhbmQgdmlld1xuXHRzZWxmLmlzUGF1c2VkID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcblx0c2VsZi5wYXVzZVZpZXcgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gKHNlbGYuaXNQYXVzZWQoKSkgPyAncGF1c2VkJyA6ICcnO1xuXHR9KTtcblxuXHQvLyBNaW51dGVzIFZpZXdcblx0c2VsZi5taW51dGVzID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHBhcnNlSW50KHNlbGYudGltZXIoKSAvIDYwLCAxMCk7XG5cdH0pO1xuXHQvLyBTZWNvbmRzIFZpZXdcblx0c2VsZi5zZWNvbmRzID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHMgPSBwYXJzZUludChzZWxmLnRpbWVyKCkgJSA2MCwgMTApO1xuXHRcdHJldHVybiAocyA8IDEwKSA/ICcwJyArIHMgOiBzO1xuXHR9KTtcblx0XG5cdC8vIFNvdW5kRlhcblx0c2VsZi5iZWxsID0gbmV3IEF1ZGlvKCdhdWRpby9iZWxsLm1wMycpO1xuXHRzZWxmLnRpY2sgPSBuZXcgQXVkaW8oJ2F1ZGlvL3RpY2subXAzJyk7XG5cdHNlbGYudG9jayA9IG5ldyBBdWRpbygnYXVkaW8vdG9jay53YXYnKTtcblx0c2VsZi5jcmFuayA9IG5ldyBBdWRpbygnYXVkaW8vY3JhbmsubXAzJyk7XG5cdHNlbGYudGlja1N0YXJ0ID0gbmV3IEF1ZGlvKCdhdWRpby9zdGFydC5tcDMnKTtcbn1cblxuUG9tb2Rvcm8ucHJvdG90eXBlLmNsb2NrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0O1xuXHR0aGlzLmVsYXBzZWQgPSBNYXRoLmZsb29yKHRpbWUgLyAxMDAgLyAxMCk7XG5cdGlmKE1hdGgucm91bmQodGhpcy5lbGFwc2VkKSA9PT0gdGhpcy5lbGFwc2VkKSB7XG5cdFx0dGhpcy5lbGFwc2VkKys7XG5cdH1cblx0dGhpcy50aW1lcih0aGlzLnJlbWFpbmluZyAtIHRoaXMuZWxhcHNlZCk7XG5cdGlmKHRoaXMudGltZXIoKSA8IDApIHtcblx0XHR0aGlzLnJlc2V0VGltZXIoKTtcblx0XHR0aGlzLnJpbmdUaW1lcigpO1xuXHR9XG5cdHRoaXMudXBkYXRlVGl0bGUoKTtcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24oKSB7XG5cdC8vIGlmIHRoaXMgaXMgbm90IHNldCB0aGVuIGNhbGxpbmcgdGhlIHNldEludGVydmFsIGZ1bmN0aW9uIHdpdGggdGhpcy5jbG9jayB3aWxsIHNldCAndGhpcycgdG8gZ2xvYmFsXG5cdHRoaXMudGljay5wbGF5KCk7XG5cdC8vIFRvIGFkanVzdCB0aW1lIGV2ZXJ5IDEwMG1zXG5cdHRoaXMuc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuXHR2YXIgbWUgPSB0aGlzO1xuXHR0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0bWUuY2xvY2soKTtcblx0fSwgMTAwKTtcbn07XG5cbi8vIFVwZGF0ZXMgcGFnZSB0aXRsZSB0byBzaG93IG1pbnV0ZXM6c2Vjb25kcyByZW1haW5pbmcuIFNpZGUgZWZmZWN0cyBmdW5jdGlvblxuUG9tb2Rvcm8ucHJvdG90eXBlLnVwZGF0ZVRpdGxlID0gZnVuY3Rpb24oKSB7XG5cdGRvY3VtZW50LnRpdGxlID0gKHRoaXMuaXNQYXVzZWQoKSkgPyAncG9tb2Rvcm8nIDogdGhpcy5taW51dGVzKCkgKyAnOicgKyB0aGlzLnNlY29uZHMoKTtcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5yZXNldFRpbWVyID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuXHR0aGlzLmNyYW5rLnBsYXkoKTtcblx0dGhpcy5pc1BhdXNlZCh0cnVlKTtcblx0dGhpcy5zZXRUaW1lcih0aGlzLmR1cmF0aW9uKCkpO1xuXHR0aGlzLnVwZGF0ZVRpdGxlKCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucmluZ1RpbWVyID0gZnVuY3Rpb24oKSB7XG5cdGNvbnNvbGUubG9nKCdSaW5nLCByaW5nIScpO1xuXHR0aGlzLmJlbGwucGxheSgpOyBcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5zZXRUaW1lciA9IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XG5cdHRoaXMucmVtYWluaW5nID0gZHVyYXRpb247XG5cdHRoaXMudGltZXIodGhpcy5yZW1haW5pbmcpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnBhdXNlUGxheSA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLnRpY2sucGxheSgpO1xuXHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuXHR0aGlzLmlzUGF1c2VkKCF0aGlzLmlzUGF1c2VkKCkpO1xuXHR0aGlzLnVwZGF0ZVRpdGxlKCk7XG5cdGlmICghdGhpcy5pc1BhdXNlZCgpKSB0aGlzLnN0YXJ0VGltZXIoKTtcblx0ZWxzZSB0aGlzLnJlbWFpbmluZyA9IHRoaXMudGltZXIoKTtcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5hZGp1c3REdXJhdGlvbiA9IGZ1bmN0aW9uKHNlY29uZHMpIHtcblx0aWYgKCF0aGlzLmlzUGF1c2VkKCkpIHRoaXMucGF1c2VQbGF5KCk7XG5cdHRoaXMudG9jay5wbGF5KCk7XG5cdGlmIChzZWNvbmRzID4gMCAmJiB0aGlzLmR1cmF0aW9uKCkgKyBzZWNvbmRzID49IDM2MDApIHtcblx0XHR0aGlzLmR1cmF0aW9uKDM2MDApO1xuXHR9XG5cdGVsc2UgaWYgKHNlY29uZHMgPCAwICYmIHRoaXMuZHVyYXRpb24oKSArIHNlY29uZHMgPCAxKSB7XG5cdFx0dGhpcy5kdXJhdGlvbih0aGlzLnRpbWVyKCkpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHRoaXMuZHVyYXRpb24odGhpcy50aW1lcigpIC0gKHRoaXMudGltZXIoKSAlIDYwKSArIHNlY29uZHMpO1xuXHR9XG5cdHRoaXMuc2V0VGltZXIodGhpcy5kdXJhdGlvbigpKTtcbn07XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXHQvLyBJbml0aWFsaXplIFBvbW9kb3JvIGNsb2NrIFZpZXdNb2RlbCBjb25zdHJ1Y3RvciBhbmQgYXBwbHkga25vY2tvdXQgYmluZGluZ3Ncblx0dmFyIHAgPSBuZXcgUG9tb2Rvcm8oMTUwMCk7XG5cdGtvLmFwcGx5QmluZGluZ3MocCk7XG5cdC8vIEFwcGx5IHBhdXNlL3BsYXkgY2xpY2sgb24gdG9tYXRvIGVsZW1lbnRcblx0JHRvbWF0byA9ICQoJyN0b21hdG8nKTtcblx0JHRvbWF0by5jbGljayhmdW5jdGlvbigpIHtcblx0XHRwLnBhdXNlUGxheSgpO1xuXHR9KTtcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
