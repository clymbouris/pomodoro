function Pomodoro(t){var i=this;i.duration=t?ko.observable(t):ko.observable(1500),i.remaining=i.duration(),i.timer=ko.observable(i.remaining),i.isPaused=ko.observable(!0),i.pauseView=ko.computed(function(){return i.isPaused()?"paused":""}),i.minutesView=ko.computed(function(){var t=parseInt(i.timer()/60,10);return t}),i.secondsView=ko.computed(function(){var t=parseInt(i.timer()%60,10);return 10>t?"0"+t:t}),i.elapsed=0,i.bell=new Audio("audio/bell.mp3"),i.tick=new Audio("audio/tick.mp3"),i.tock=new Audio("audio/tock.wav"),i.crank=new Audio("audio/crank.mp3"),i.tickStart=new Audio("audio/start.mp3")}Pomodoro.prototype.clock=function(){var t=(new Date).getTime()-this.start;this.elapsed=Math.floor(t/100/10),Math.round(this.elapsed)===this.elapsed&&this.elapsed++,this.timer(this.remaining-this.elapsed),this.timer()<0&&(this.resetTimer(),this.ringTimer()),this.timer()<10&&this.tick.play()},Pomodoro.prototype.startTimer=function(){this.tick.play();var t=this;this.start=(new Date).getTime(),this.interval=setInterval(function(){t.clock()},100)},Pomodoro.prototype.resetTimer=function(){clearInterval(this.interval),this.crank.play(),this.isPaused(!0),this.setTimer(this.duration())},Pomodoro.prototype.ringTimer=function(){console.log("Ring, ring!"),this.bell.play()},Pomodoro.prototype.setTimer=function(t){this.remaining=t,this.timer(this.remaining)},Pomodoro.prototype.pausePlay=function(){this.tick.play(),clearInterval(this.interval),this.isPaused(!this.isPaused()),this.isPaused()?this.remaining=this.timer():this.startTimer()},Pomodoro.prototype.adjustDuration=function(t){this.isPaused()||this.pausePlay(),this.tock.play(),t>0&&this.duration()+t>=3600?this.duration(3600):0>t&&this.duration()+t<1?this.duration(this.timer()):this.duration(this.duration()+t),this.setTimer(this.duration())},$(document).ready(function(){var t=new Pomodoro(1500);ko.applyBindings(t),$tomato=$("#tomato"),$tomato.click(function(){t.pausePlay()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbW9kb3JvLmpzIiwidG9tYXRvLmpzIl0sIm5hbWVzIjpbIlBvbW9kb3JvIiwiZHVyYXRpb24iLCJzZWxmIiwidGhpcyIsImtvIiwib2JzZXJ2YWJsZSIsInJlbWFpbmluZyIsInRpbWVyIiwiaXNQYXVzZWQiLCJwYXVzZVZpZXciLCJjb21wdXRlZCIsIm1pbnV0ZXNWaWV3IiwibWludXRlcyIsInBhcnNlSW50Iiwic2Vjb25kc1ZpZXciLCJzZWNvbmRzIiwiZWxhcHNlZCIsImJlbGwiLCJBdWRpbyIsInRpY2siLCJ0b2NrIiwiY3JhbmsiLCJ0aWNrU3RhcnQiLCJwcm90b3R5cGUiLCJjbG9jayIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInN0YXJ0IiwiTWF0aCIsImZsb29yIiwicm91bmQiLCJyZXNldFRpbWVyIiwicmluZ1RpbWVyIiwicGxheSIsInN0YXJ0VGltZXIiLCJtZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic2V0VGltZXIiLCJjb25zb2xlIiwibG9nIiwicGF1c2VQbGF5IiwiYWRqdXN0RHVyYXRpb24iLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInAiLCJhcHBseUJpbmRpbmdzIiwiJHRvbWF0byIsImNsaWNrIl0sIm1hcHBpbmdzIjoiQUFDQSxRQUFBQSxVQUFBQyxHQUNBLEdBQUFDLEdBQUFDLElBRUFELEdBQUFELFNBQUEsRUFBQUcsR0FBQUMsV0FBQUosR0FBQUcsR0FBQUMsV0FBQSxNQUVBSCxFQUFBSSxVQUFBSixFQUFBRCxXQUVBQyxFQUFBSyxNQUFBSCxHQUFBQyxXQUFBSCxFQUFBSSxXQUVBSixFQUFBTSxTQUFBSixHQUFBQyxZQUFBLEdBQ0FILEVBQUFPLFVBQUFMLEdBQUFNLFNBQUEsV0FDQSxNQUFBUixHQUFBTSxXQUFBLFNBQUEsS0FHQU4sRUFBQVMsWUFBQVAsR0FBQU0sU0FBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQUFYLEVBQUFLLFFBQUEsR0FBQSxHQUNBLE9BQUFLLEtBR0FWLEVBQUFZLFlBQUFWLEdBQUFNLFNBQUEsV0FDQSxHQUFBSyxHQUFBRixTQUFBWCxFQUFBSyxRQUFBLEdBQUEsR0FDQSxPQUFBLElBQUFRLEVBQUEsSUFBQUEsRUFBQUEsSUFHQWIsRUFBQWMsUUFBQSxFQUVBZCxFQUFBZSxLQUFBLEdBQUFDLE9BQUEsa0JBQ0FoQixFQUFBaUIsS0FBQSxHQUFBRCxPQUFBLGtCQUNBaEIsRUFBQWtCLEtBQUEsR0FBQUYsT0FBQSxrQkFDQWhCLEVBQUFtQixNQUFBLEdBQUFILE9BQUEsbUJBQ0FoQixFQUFBb0IsVUFBQSxHQUFBSixPQUFBLG1CQUdBbEIsU0FBQXVCLFVBQUFDLE1BQUEsV0FDQSxHQUFBQyxJQUFBLEdBQUFDLE9BQUFDLFVBQUF4QixLQUFBeUIsS0FDQXpCLE1BQUFhLFFBQUFhLEtBQUFDLE1BQUFMLEVBQUEsSUFBQSxJQUNBSSxLQUFBRSxNQUFBNUIsS0FBQWEsV0FBQWIsS0FBQWEsU0FDQWIsS0FBQWEsVUFFQWIsS0FBQUksTUFBQUosS0FBQUcsVUFBQUgsS0FBQWEsU0FDQWIsS0FBQUksUUFBQSxJQUNBSixLQUFBNkIsYUFDQTdCLEtBQUE4QixhQUVBOUIsS0FBQUksUUFBQSxJQUNBSixLQUFBZ0IsS0FBQWUsUUFJQWxDLFNBQUF1QixVQUFBWSxXQUFBLFdBRUFoQyxLQUFBZ0IsS0FBQWUsTUFDQSxJQUFBRSxHQUFBakMsSUFDQUEsTUFBQXlCLE9BQUEsR0FBQUYsT0FBQUMsVUFDQXhCLEtBQUFrQyxTQUFBQyxZQUFBLFdBQ0FGLEVBQUFaLFNBQ0EsTUFHQXhCLFNBQUF1QixVQUFBUyxXQUFBLFdBQ0FPLGNBQUFwQyxLQUFBa0MsVUFDQWxDLEtBQUFrQixNQUFBYSxPQUNBL0IsS0FBQUssVUFBQSxHQUNBTCxLQUFBcUMsU0FBQXJDLEtBQUFGLGFBR0FELFNBQUF1QixVQUFBVSxVQUFBLFdBQ0FRLFFBQUFDLElBQUEsZUFDQXZDLEtBQUFjLEtBQUFpQixRQUdBbEMsU0FBQXVCLFVBQUFpQixTQUFBLFNBQUF2QyxHQUNBRSxLQUFBRyxVQUFBTCxFQUNBRSxLQUFBSSxNQUFBSixLQUFBRyxZQUdBTixTQUFBdUIsVUFBQW9CLFVBQUEsV0FDQXhDLEtBQUFnQixLQUFBZSxPQUNBSyxjQUFBcEMsS0FBQWtDLFVBQ0FsQyxLQUFBSyxVQUFBTCxLQUFBSyxZQUNBTCxLQUFBSyxXQUNBTCxLQUFBRyxVQUFBSCxLQUFBSSxRQURBSixLQUFBZ0MsY0FJQW5DLFNBQUF1QixVQUFBcUIsZUFBQSxTQUFBN0IsR0FDQVosS0FBQUssWUFBQUwsS0FBQXdDLFlBQ0F4QyxLQUFBaUIsS0FBQWMsT0FDQW5CLEVBQUEsR0FBQVosS0FBQUYsV0FBQWMsR0FBQSxLQUNBWixLQUFBRixTQUFBLE1BRUEsRUFBQWMsR0FBQVosS0FBQUYsV0FBQWMsRUFBQSxFQUNBWixLQUFBRixTQUFBRSxLQUFBSSxTQUdBSixLQUFBRixTQUFBRSxLQUFBRixXQUFBYyxHQUVBWixLQUFBcUMsU0FBQXJDLEtBQUFGLGFDakdBNEMsRUFBQUMsVUFBQUMsTUFBQSxXQUNBLEdBQUFDLEdBQUEsR0FBQWhELFVBQUEsS0FDQUksSUFBQTZDLGNBQUFELEdBQ0FFLFFBQUFMLEVBQUEsV0FDQUssUUFBQUMsTUFBQSxXQUNBSCxFQUFBTCIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAvLyBkdXJhdGlvbjogc2Vjb25kc1xuZnVuY3Rpb24gUG9tb2Rvcm8oZHVyYXRpb24pIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQvLyBUaW1lIGR1cmF0aW9uIGFzIHNldCBieSBVc2VyXG5cdHNlbGYuZHVyYXRpb24gPSAoZHVyYXRpb24pID8ga28ub2JzZXJ2YWJsZShkdXJhdGlvbikgOiBrby5vYnNlcnZhYmxlKDI1ICogNjApO1xuXHQvLyBUaW1lIHJlbWFpbmluZyBpbiBzZWNvbmRzXG5cdHNlbGYucmVtYWluaW5nID0gc2VsZi5kdXJhdGlvbigpO1xuXHQvLyBSdW5uaW5nIFRpbWVyXG5cdHNlbGYudGltZXIgPSBrby5vYnNlcnZhYmxlKHNlbGYucmVtYWluaW5nKTtcblx0Ly8gUGF1c2Ugc3RhdHVzIGFuZCB2aWV3XG5cdHNlbGYuaXNQYXVzZWQgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuXHRzZWxmLnBhdXNlVmlldyA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAoc2VsZi5pc1BhdXNlZCgpKSA/ICdwYXVzZWQnIDogJyc7XG5cdH0pO1xuXHQvLyBNaW51dGVzIFZpZXdcblx0c2VsZi5taW51dGVzVmlldyA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtaW51dGVzID0gcGFyc2VJbnQoc2VsZi50aW1lcigpIC8gNjAsIDEwKTtcblx0XHRyZXR1cm4gbWludXRlcztcblx0fSk7XG5cdC8vIFNlY29uZHMgVmlld1xuXHRzZWxmLnNlY29uZHNWaWV3ID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNlY29uZHMgPSBwYXJzZUludChzZWxmLnRpbWVyKCkgJSA2MCwgMTApO1xuXHRcdHJldHVybiAoc2Vjb25kcyA8IDEwKSA/ICcwJyArIHNlY29uZHMgOiBzZWNvbmRzO1xuXHR9KTtcblx0Ly8gVG8ga2VlcCBjbG9jayBmdW5jdGlvbiBhY2N1cmF0ZVxuXHRzZWxmLmVsYXBzZWQgPSAwO1xuXHQvLyBTb3VuZEZYXG5cdHNlbGYuYmVsbCA9IG5ldyBBdWRpbygnYXVkaW8vYmVsbC5tcDMnKTtcblx0c2VsZi50aWNrID0gbmV3IEF1ZGlvKCdhdWRpby90aWNrLm1wMycpO1xuXHRzZWxmLnRvY2sgPSBuZXcgQXVkaW8oJ2F1ZGlvL3RvY2sud2F2Jyk7XG5cdHNlbGYuY3JhbmsgPSBuZXcgQXVkaW8oJ2F1ZGlvL2NyYW5rLm1wMycpO1xuXHRzZWxmLnRpY2tTdGFydCA9IG5ldyBBdWRpbygnYXVkaW8vc3RhcnQubXAzJyk7XG59XG5cblBvbW9kb3JvLnByb3RvdHlwZS5jbG9jayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5zdGFydDtcblx0dGhpcy5lbGFwc2VkID0gTWF0aC5mbG9vcih0aW1lIC8gMTAwIC8gMTApO1xuXHRpZihNYXRoLnJvdW5kKHRoaXMuZWxhcHNlZCkgPT09IHRoaXMuZWxhcHNlZCkge1xuXHRcdHRoaXMuZWxhcHNlZCsrO1xuXHR9XG5cdHRoaXMudGltZXIodGhpcy5yZW1haW5pbmcgLSB0aGlzLmVsYXBzZWQpO1xuXHRpZih0aGlzLnRpbWVyKCkgPCAwKSB7XG5cdFx0dGhpcy5yZXNldFRpbWVyKCk7XG5cdFx0dGhpcy5yaW5nVGltZXIoKTtcblx0fVxuXHRpZih0aGlzLnRpbWVyKCkgPCAxMCkge1xuXHRcdHRoaXMudGljay5wbGF5KCk7XG5cdH1cbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24oKSB7XG5cdC8vIGlmIHRoaXMgaXMgbm90IHNldCB0aGVuIGNhbGxpbmcgdGhlIHNldEludGVydmFsIGZ1bmN0aW9uIHdpdGggdGhpcy5jbG9jayB3aWxsIHNldCAndGhpcycgdG8gZ2xvYmFsXG5cdHRoaXMudGljay5wbGF5KCk7XG5cdHZhciBtZSA9IHRoaXM7XG5cdHRoaXMuc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0dGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRcdG1lLmNsb2NrKCk7XG5cdH0sIDEwMCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucmVzZXRUaW1lciA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuXHR0aGlzLmNyYW5rLnBsYXkoKTtcblx0dGhpcy5pc1BhdXNlZCh0cnVlKTtcblx0dGhpcy5zZXRUaW1lcih0aGlzLmR1cmF0aW9uKCkpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnJpbmdUaW1lciA9IGZ1bmN0aW9uKCkge1xuXHRjb25zb2xlLmxvZygnUmluZywgcmluZyEnKTtcblx0dGhpcy5iZWxsLnBsYXkoKTtcbn07XG5cblBvbW9kb3JvLnByb3RvdHlwZS5zZXRUaW1lciA9IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XG5cdHRoaXMucmVtYWluaW5nID0gZHVyYXRpb247XG5cdHRoaXMudGltZXIodGhpcy5yZW1haW5pbmcpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnBhdXNlUGxheSA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMudGljay5wbGF5KCk7XG5cdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG5cdHRoaXMuaXNQYXVzZWQoIXRoaXMuaXNQYXVzZWQoKSk7XG5cdGlmICghdGhpcy5pc1BhdXNlZCgpKSB0aGlzLnN0YXJ0VGltZXIoKTsgXG5cdGVsc2UgdGhpcy5yZW1haW5pbmcgPSB0aGlzLnRpbWVyKCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUuYWRqdXN0RHVyYXRpb24gPSBmdW5jdGlvbihzZWNvbmRzKSB7XG5cdGlmICghdGhpcy5pc1BhdXNlZCgpKSB0aGlzLnBhdXNlUGxheSgpO1xuXHR0aGlzLnRvY2sucGxheSgpO1xuXHRpZiAoc2Vjb25kcyA+IDAgJiYgdGhpcy5kdXJhdGlvbigpICsgc2Vjb25kcyA+PSAzNjAwKSB7XG5cdFx0dGhpcy5kdXJhdGlvbigzNjAwKTtcblx0fVxuXHRlbHNlIGlmIChzZWNvbmRzIDwgMCAmJiB0aGlzLmR1cmF0aW9uKCkgKyBzZWNvbmRzIDwgMSkge1xuXHRcdHRoaXMuZHVyYXRpb24odGhpcy50aW1lcigpKTtcblx0fVxuXHRlbHNlIHtcblx0XHR0aGlzLmR1cmF0aW9uKHRoaXMuZHVyYXRpb24oKSArIHNlY29uZHMpO1xuXHR9XG5cdHRoaXMuc2V0VGltZXIodGhpcy5kdXJhdGlvbigpKTtcbn07XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXHR2YXIgcCA9IG5ldyBQb21vZG9ybygxNTAwKTtcblx0a28uYXBwbHlCaW5kaW5ncyhwKTtcblx0JHRvbWF0byA9ICQoJyN0b21hdG8nKTtcblx0JHRvbWF0by5jbGljayhmdW5jdGlvbigpIHtcblx0XHRwLnBhdXNlUGxheSgpO1xuXHR9KTtcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
