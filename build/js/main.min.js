function Pomodoro(t){var i=this;i.duration=t?ko.observable(t):ko.observable(1500),i.remaining=i.duration(),i.timer=ko.observable(i.remaining),i.elapsed=0,i.isPaused=ko.observable(!0),i.pauseView=ko.computed(function(){return i.isPaused()?"paused":""}),i.minutes=ko.computed(function(){return parseInt(i.timer()/60,10)}),i.seconds=ko.computed(function(){var t=parseInt(i.timer()%60,10);return 10>t?"0"+t:t}),i.mute=function(){i.audio.muted=!i.audio.muted},i.audio={muted:!1,bell:new Audio("audio/bell.mp3"),tick:new Audio("audio/tick.mp3"),crank:new Audio("audio/crank.mp3"),tock:new Audio("audio/tock.wav")}}Pomodoro.prototype.clock=function(){var t=(new Date).getTime()-this.start;this.elapsed=Math.floor(t/100/10),Math.round(this.elapsed)===this.elapsed&&this.elapsed++,this.timer(this.remaining-this.elapsed),this.timer()<0?this.resetTimer():this.updateTitle()},Pomodoro.prototype.startTimer=function(){this.playSound("tick"),this.start=(new Date).getTime();var t=this;this.interval=setInterval(function(){t.clock()},100)},Pomodoro.prototype.playSound=function(t){if(this.audio.muted)console.log(t+"!");else switch(t){case"bell":this.audio.bell.play();break;case"crank":this.audio.crank.play();break;case"tick":this.audio.tick.play();break;case"tock":this.audio.tock.play()}},Pomodoro.prototype.updateTitle=function(){document.title=this.isPaused()?"pomodoro":this.minutes()+":"+this.seconds()},Pomodoro.prototype.resetTimer=function(){this.playSound("bell"),clearInterval(this.interval),this.isPaused(!0),this.updateTitle(),this.setTimer(this.duration())},Pomodoro.prototype.setTimer=function(t){this.remaining=t,this.timer(this.remaining)},Pomodoro.prototype.pausePlay=function(){this.playSound("tick"),clearInterval(this.interval),this.isPaused(!this.isPaused()),this.updateTitle(),this.isPaused()?this.remaining=this.timer():this.startTimer()},Pomodoro.prototype.adjustDuration=function(t){this.playSound("tock"),this.isPaused()||this.pausePlay(),t>0&&this.duration()+t>=3600?this.duration(3600):0>t&&this.duration()+t<1?this.duration(this.timer()):this.duration(this.timer()-this.timer()%60+t),this.setTimer(this.duration())},$(document).ready(function(){var t=new Pomodoro(1500);ko.applyBindings(t),$tomato=$("#tomato"),$tomato.click(function(){t.pausePlay()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbW9kb3JvLmpzIiwidG9tYXRvLmpzIl0sIm5hbWVzIjpbIlBvbW9kb3JvIiwiZHVyYXRpb24iLCJzZWxmIiwidGhpcyIsImtvIiwib2JzZXJ2YWJsZSIsInJlbWFpbmluZyIsInRpbWVyIiwiZWxhcHNlZCIsImlzUGF1c2VkIiwicGF1c2VWaWV3IiwiY29tcHV0ZWQiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJzZWNvbmRzIiwicyIsIm11dGUiLCJhdWRpbyIsIm11dGVkIiwiYmVsbCIsIkF1ZGlvIiwidGljayIsImNyYW5rIiwidG9jayIsInByb3RvdHlwZSIsImNsb2NrIiwidGltZSIsIkRhdGUiLCJnZXRUaW1lIiwic3RhcnQiLCJNYXRoIiwiZmxvb3IiLCJyb3VuZCIsInJlc2V0VGltZXIiLCJ1cGRhdGVUaXRsZSIsInN0YXJ0VGltZXIiLCJwbGF5U291bmQiLCJtZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsInBsYXkiLCJkb2N1bWVudCIsInRpdGxlIiwiY2xlYXJJbnRlcnZhbCIsInNldFRpbWVyIiwicGF1c2VQbGF5IiwiYWRqdXN0RHVyYXRpb24iLCIkIiwicmVhZHkiLCJwIiwiYXBwbHlCaW5kaW5ncyIsIiR0b21hdG8iLCJjbGljayJdLCJtYXBwaW5ncyI6IkFBQ0EsUUFBQUEsVUFBQUMsR0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRCxTQUFBLEVBQUFHLEdBQUFDLFdBQUFKLEdBQUFHLEdBQUFDLFdBQUEsTUFFQUgsRUFBQUksVUFBQUosRUFBQUQsV0FFQUMsRUFBQUssTUFBQUgsR0FBQUMsV0FBQUgsRUFBQUksV0FFQUosRUFBQU0sUUFBQSxFQUdBTixFQUFBTyxTQUFBTCxHQUFBQyxZQUFBLEdBQ0FILEVBQUFRLFVBQUFOLEdBQUFPLFNBQUEsV0FDQSxNQUFBVCxHQUFBTyxXQUFBLFNBQUEsS0FJQVAsRUFBQVUsUUFBQVIsR0FBQU8sU0FBQSxXQUNBLE1BQUFFLFVBQUFYLEVBQUFLLFFBQUEsR0FBQSxNQUdBTCxFQUFBWSxRQUFBVixHQUFBTyxTQUFBLFdBQ0EsR0FBQUksR0FBQUYsU0FBQVgsRUFBQUssUUFBQSxHQUFBLEdBQ0EsT0FBQSxJQUFBUSxFQUFBLElBQUFBLEVBQUFBLElBSUFiLEVBQUFjLEtBQUEsV0FDQWQsRUFBQWUsTUFBQUMsT0FBQWhCLEVBQUFlLE1BQUFDLE9BRUFoQixFQUFBZSxPQUNBQyxPQUFBLEVBQ0FDLEtBQUEsR0FBQUMsT0FBQSxrQkFDQUMsS0FBQSxHQUFBRCxPQUFBLGtCQUNBRSxNQUFBLEdBQUFGLE9BQUEsbUJBQ0FHLEtBQUEsR0FBQUgsT0FBQSxtQkFJQXBCLFNBQUF3QixVQUFBQyxNQUFBLFdBRUEsR0FBQUMsSUFBQSxHQUFBQyxPQUFBQyxVQUFBekIsS0FBQTBCLEtBQ0ExQixNQUFBSyxRQUFBc0IsS0FBQUMsTUFBQUwsRUFBQSxJQUFBLElBQ0FJLEtBQUFFLE1BQUE3QixLQUFBSyxXQUFBTCxLQUFBSyxTQUNBTCxLQUFBSyxVQUdBTCxLQUFBSSxNQUFBSixLQUFBRyxVQUFBSCxLQUFBSyxTQUVBTCxLQUFBSSxRQUFBLEVBQ0FKLEtBQUE4QixhQUdBOUIsS0FBQStCLGVBSUFsQyxTQUFBd0IsVUFBQVcsV0FBQSxXQUVBaEMsS0FBQWlDLFVBQUEsUUFFQWpDLEtBQUEwQixPQUFBLEdBQUFGLE9BQUFDLFNBRUEsSUFBQVMsR0FBQWxDLElBQ0FBLE1BQUFtQyxTQUFBQyxZQUFBLFdBQ0FGLEVBQUFaLFNBQ0EsTUFHQXpCLFNBQUF3QixVQUFBWSxVQUFBLFNBQUFJLEdBQ0EsR0FBQXJDLEtBQUFjLE1BQUFDLE1BaUJBdUIsUUFBQUMsSUFBQUYsRUFBQSxTQWhCQSxRQUFBQSxHQUNBLElBQUEsT0FDQXJDLEtBQUFjLE1BQUFFLEtBQUF3QixNQUNBLE1BQ0EsS0FBQSxRQUNBeEMsS0FBQWMsTUFBQUssTUFBQXFCLE1BQ0EsTUFDQSxLQUFBLE9BQ0F4QyxLQUFBYyxNQUFBSSxLQUFBc0IsTUFDQSxNQUNBLEtBQUEsT0FDQXhDLEtBQUFjLE1BQUFNLEtBQUFvQixTQVVBM0MsU0FBQXdCLFVBQUFVLFlBQUEsV0FDQVUsU0FBQUMsTUFBQTFDLEtBQUFNLFdBQUEsV0FBQU4sS0FBQVMsVUFBQSxJQUFBVCxLQUFBVyxXQUdBZCxTQUFBd0IsVUFBQVMsV0FBQSxXQUNBOUIsS0FBQWlDLFVBQUEsUUFFQVUsY0FBQTNDLEtBQUFtQyxVQUVBbkMsS0FBQU0sVUFBQSxHQUNBTixLQUFBK0IsY0FFQS9CLEtBQUE0QyxTQUFBNUMsS0FBQUYsYUFHQUQsU0FBQXdCLFVBQUF1QixTQUFBLFNBQUE5QyxHQUNBRSxLQUFBRyxVQUFBTCxFQUNBRSxLQUFBSSxNQUFBSixLQUFBRyxZQUdBTixTQUFBd0IsVUFBQXdCLFVBQUEsV0FDQTdDLEtBQUFpQyxVQUFBLFFBQ0FVLGNBQUEzQyxLQUFBbUMsVUFDQW5DLEtBQUFNLFVBQUFOLEtBQUFNLFlBQ0FOLEtBQUErQixjQUNBL0IsS0FBQU0sV0FDQU4sS0FBQUcsVUFBQUgsS0FBQUksUUFEQUosS0FBQWdDLGNBSUFuQyxTQUFBd0IsVUFBQXlCLGVBQUEsU0FBQW5DLEdBQ0FYLEtBQUFpQyxVQUFBLFFBQ0FqQyxLQUFBTSxZQUFBTixLQUFBNkMsWUFDQWxDLEVBQUEsR0FBQVgsS0FBQUYsV0FBQWEsR0FBQSxLQUNBWCxLQUFBRixTQUFBLE1BRUEsRUFBQWEsR0FBQVgsS0FBQUYsV0FBQWEsRUFBQSxFQUNBWCxLQUFBRixTQUFBRSxLQUFBSSxTQUdBSixLQUFBRixTQUFBRSxLQUFBSSxRQUFBSixLQUFBSSxRQUFBLEdBQUFPLEdBRUFYLEtBQUE0QyxTQUFBNUMsS0FBQUYsYUN2SUFpRCxFQUFBTixVQUFBTyxNQUFBLFdBRUEsR0FBQUMsR0FBQSxHQUFBcEQsVUFBQSxLQUNBSSxJQUFBaUQsY0FBQUQsR0FFQUUsUUFBQUosRUFBQSxXQUNBSSxRQUFBQyxNQUFBLFdBQ0FILEVBQUFKIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIC8vIGR1cmF0aW9uOiBzZWNvbmRzXG5mdW5jdGlvbiBQb21vZG9ybyhkdXJhdGlvbikge1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdC8vIFVzZXIgaW5pdGlhbCBkdXJhdGlvbi4gRGVmYXVsdCAyNSBtaW5zLlxuXHRzZWxmLmR1cmF0aW9uID0gKGR1cmF0aW9uKSA/IGtvLm9ic2VydmFibGUoZHVyYXRpb24pIDoga28ub2JzZXJ2YWJsZSgyNSAqIDYwKTtcblx0Ly8gVGltZSByZW1haW5pbmcgaW4gc2Vjb25kcy4gVXNlZCB0byBrZWVwIHRyYWNrIG9mIHRpbWUgd2hlbiB1c2luZyBzZXRUaW1lcigpIGFuZCBwYXVzZVBsYXkoKVxuXHRzZWxmLnJlbWFpbmluZyA9IHNlbGYuZHVyYXRpb24oKTtcblx0Ly8gUnVubmluZyBUaW1lclxuXHRzZWxmLnRpbWVyID0ga28ub2JzZXJ2YWJsZShzZWxmLnJlbWFpbmluZyk7XG5cdC8vIFVzZWQgaW4gY2xvY2sgbWV0aG9kIHRvIGtlZXAgdGltZXIgYWNjdXJhdGUgKHNldEludGVydmFsKVxuXHRzZWxmLmVsYXBzZWQgPSAwO1xuXG5cdC8vIFBhdXNlIHN0YXR1cyBhbmQgdmlld1xuXHRzZWxmLmlzUGF1c2VkID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcblx0c2VsZi5wYXVzZVZpZXcgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gKHNlbGYuaXNQYXVzZWQoKSkgPyAncGF1c2VkJyA6ICcnO1xuXHR9KTtcblxuXHQvLyBNaW51dGVzIFZpZXdcblx0c2VsZi5taW51dGVzID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHBhcnNlSW50KHNlbGYudGltZXIoKSAvIDYwLCAxMCk7XG5cdH0pO1xuXHQvLyBTZWNvbmRzIFZpZXdcblx0c2VsZi5zZWNvbmRzID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHMgPSBwYXJzZUludChzZWxmLnRpbWVyKCkgJSA2MCwgMTApO1xuXHRcdHJldHVybiAocyA8IDEwKSA/ICcwJyArIHMgOiBzO1xuXHR9KTtcblx0XG5cdC8vIEF1ZGlvXG5cdHNlbGYubXV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHNlbGYuYXVkaW8ubXV0ZWQgPSAhc2VsZi5hdWRpby5tdXRlZDtcblx0fTtcblx0c2VsZi5hdWRpbyA9IHtcblx0XHRtdXRlZDogZmFsc2UsXG5cdFx0YmVsbDogbmV3IEF1ZGlvKCdhdWRpby9iZWxsLm1wMycpLFxuXHRcdHRpY2s6IG5ldyBBdWRpbygnYXVkaW8vdGljay5tcDMnKSxcblx0XHRjcmFuazogbmV3IEF1ZGlvKCdhdWRpby9jcmFuay5tcDMnKSxcblx0XHR0b2NrOiBuZXcgQXVkaW8oJ2F1ZGlvL3RvY2sud2F2Jylcblx0fTtcbn1cblxuUG9tb2Rvcm8ucHJvdG90eXBlLmNsb2NrID0gZnVuY3Rpb24oKSB7XG5cdC8vIEFkanVzdCB0aW1lIGRyaWZ0XG5cdHZhciB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0O1xuXHR0aGlzLmVsYXBzZWQgPSBNYXRoLmZsb29yKHRpbWUgLyAxMDAgLyAxMCk7XG5cdGlmKE1hdGgucm91bmQodGhpcy5lbGFwc2VkKSA9PT0gdGhpcy5lbGFwc2VkKSB7XG5cdFx0dGhpcy5lbGFwc2VkKys7XG5cdH1cblx0Ly8gVXBkYXRlIHRpbWVyIHRvIG5ldyB2YWx1ZVxuXHR0aGlzLnRpbWVyKHRoaXMucmVtYWluaW5nIC0gdGhpcy5lbGFwc2VkKTtcblx0Ly8gQ2hlY2sgaWYgdGltZSBpcyB1cFxuXHRpZiAodGhpcy50aW1lcigpIDwgMCkge1xuXHRcdHRoaXMucmVzZXRUaW1lcigpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHRoaXMudXBkYXRlVGl0bGUoKTtcblx0fVxufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnN0YXJ0VGltZXIgPSBmdW5jdGlvbigpIHtcblx0Ly8gaWYgdGhpcyBpcyBub3Qgc2V0IHRoZW4gY2FsbGluZyB0aGUgc2V0SW50ZXJ2YWwgZnVuY3Rpb24gd2l0aCB0aGlzLmNsb2NrIHdpbGwgc2V0ICd0aGlzJyB0byBnbG9iYWxcblx0dGhpcy5wbGF5U291bmQoJ3RpY2snKTtcblx0Ly8gVXNlZCB0byBhZGp1c3QgdGltZSBpbnNpZGUgY2xvY2sgbWV0aG9kXG5cdHRoaXMuc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0Ly8gU3RhcnQgc2V0SW50ZXJ2YWxcblx0dmFyIG1lID0gdGhpcztcblx0dGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRcdG1lLmNsb2NrKCk7XG5cdH0sIDEwMCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucGxheVNvdW5kID0gZnVuY3Rpb24obmFtZSkge1xuXHRpZiAoIXRoaXMuYXVkaW8ubXV0ZWQpIHtcblx0XHRzd2l0Y2ggKG5hbWUpIHtcblx0XHQgICAgY2FzZSBcImJlbGxcIjpcblx0XHQgICAgXHR0aGlzLmF1ZGlvLmJlbGwucGxheSgpO1xuXHRcdCAgICAgICAgYnJlYWs7XG5cdFx0ICAgIGNhc2UgXCJjcmFua1wiOlxuXHRcdCAgICAgICAgdGhpcy5hdWRpby5jcmFuay5wbGF5KCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcInRpY2tcIjpcblx0XHQgICAgICAgIHRoaXMuYXVkaW8udGljay5wbGF5KCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgY2FzZSBcInRvY2tcIjpcblx0XHQgICAgICAgIHRoaXMuYXVkaW8udG9jay5wbGF5KCk7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHR9XG5cdH1cblx0ZWxzZSB7XG5cdFx0Y29uc29sZS5sb2cobmFtZSArICchJyk7XG5cdH1cbn07XG4gXG4vLyBVcGRhdGVzIHBhZ2UgdGl0bGUgdG8gc2hvdyBtaW51dGVzOnNlY29uZHMgcmVtYWluaW5nLiBTaWRlIGVmZmVjdHMgZnVuY3Rpb25cblBvbW9kb3JvLnByb3RvdHlwZS51cGRhdGVUaXRsZSA9IGZ1bmN0aW9uKCkge1xuXHRkb2N1bWVudC50aXRsZSA9ICh0aGlzLmlzUGF1c2VkKCkpID8gJ3BvbW9kb3JvJyA6IHRoaXMubWludXRlcygpICsgJzonICsgdGhpcy5zZWNvbmRzKCk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucmVzZXRUaW1lciA9IGZ1bmN0aW9uKCkge1xuXHR0aGlzLnBsYXlTb3VuZCgnYmVsbCcpO1xuXHQvLyBFbmQgc2V0SW50ZXJ2YWxcblx0Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcblx0Ly8gUGF1c2UgYW5kIHVwZGF0ZSB0aXRsZVxuXHR0aGlzLmlzUGF1c2VkKHRydWUpO1xuXHR0aGlzLnVwZGF0ZVRpdGxlKCk7XG5cdC8vIFNldCB0aW1lciB0byB1c2VyIGluaXRpYWwgZHVyYXRpb25cblx0dGhpcy5zZXRUaW1lcih0aGlzLmR1cmF0aW9uKCkpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLnNldFRpbWVyID0gZnVuY3Rpb24oZHVyYXRpb24pIHtcblx0dGhpcy5yZW1haW5pbmcgPSBkdXJhdGlvbjtcblx0dGhpcy50aW1lcih0aGlzLnJlbWFpbmluZyk7XG59O1xuXG5Qb21vZG9yby5wcm90b3R5cGUucGF1c2VQbGF5ID0gZnVuY3Rpb24oKSB7XG5cdHRoaXMucGxheVNvdW5kKCd0aWNrJyk7XG5cdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG5cdHRoaXMuaXNQYXVzZWQoIXRoaXMuaXNQYXVzZWQoKSk7XG5cdHRoaXMudXBkYXRlVGl0bGUoKTtcblx0aWYgKCF0aGlzLmlzUGF1c2VkKCkpIHRoaXMuc3RhcnRUaW1lcigpO1xuXHRlbHNlIHRoaXMucmVtYWluaW5nID0gdGhpcy50aW1lcigpO1xufTtcblxuUG9tb2Rvcm8ucHJvdG90eXBlLmFkanVzdER1cmF0aW9uID0gZnVuY3Rpb24oc2Vjb25kcykge1xuXHR0aGlzLnBsYXlTb3VuZCgndG9jaycpO1xuXHRpZiAoIXRoaXMuaXNQYXVzZWQoKSkgdGhpcy5wYXVzZVBsYXkoKTtcblx0aWYgKHNlY29uZHMgPiAwICYmIHRoaXMuZHVyYXRpb24oKSArIHNlY29uZHMgPj0gMzYwMCkge1xuXHRcdHRoaXMuZHVyYXRpb24oMzYwMCk7XG5cdH1cblx0ZWxzZSBpZiAoc2Vjb25kcyA8IDAgJiYgdGhpcy5kdXJhdGlvbigpICsgc2Vjb25kcyA8IDEpIHtcblx0XHR0aGlzLmR1cmF0aW9uKHRoaXMudGltZXIoKSk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0dGhpcy5kdXJhdGlvbih0aGlzLnRpbWVyKCkgLSAodGhpcy50aW1lcigpICUgNjApICsgc2Vjb25kcyk7XG5cdH1cblx0dGhpcy5zZXRUaW1lcih0aGlzLmR1cmF0aW9uKCkpO1xufTtcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cdC8vIEluaXRpYWxpemUgUG9tb2Rvcm8gY2xvY2sgVmlld01vZGVsIGNvbnN0cnVjdG9yIGFuZCBhcHBseSBrbm9ja291dCBiaW5kaW5nc1xuXHR2YXIgcCA9IG5ldyBQb21vZG9ybygxNTAwKTtcblx0a28uYXBwbHlCaW5kaW5ncyhwKTtcblx0Ly8gQXBwbHkgcGF1c2UvcGxheSBjbGljayBvbiB0b21hdG8gZWxlbWVudFxuXHQkdG9tYXRvID0gJCgnI3RvbWF0bycpO1xuXHQkdG9tYXRvLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdHAucGF1c2VQbGF5KCk7XG5cdH0pO1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
